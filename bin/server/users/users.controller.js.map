{"version":3,"sources":["../../../src/server/users/users.controller.js"],"names":["express","require","router","Router","userService","post","authenticate","register","get","getAll","getCurrent","getById","put","update","delete","_delete","module","exports","req","res","next","body","then","user","json","status","message","catch","err","create","users","sub","sendStatus","params","id"],"mappings":"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","sourcesContent":["ï»¿/* eslint-disable no-confusing-arrow */\n/* eslint-disable no-use-before-define */\nconst express = require(\"express\");\nconst router = express.Router();\nconst userService = require(\"./user.service\");\n\n// routes\nrouter.post(\"/authenticate\", authenticate);\nrouter.post(\"/register\", register);\nrouter.get(\"/\", getAll);\nrouter.get(\"/current\", getCurrent);\nrouter.get(\"/:id\", getById);\nrouter.put(\"/:id\", update);\nrouter.delete(\"/:id\", _delete);\n\nmodule.exports = router;\n\nfunction authenticate(req, res, next) {\n    userService\n        .authenticate(req.body)\n        .then(user =>\n            user\n                ? res.json(user)\n                : res\n                      .status(400)\n                      .json({message: \"pseudo or password is incorrect\"}),\n        )\n        .catch(err => next(err));\n}\n\nfunction register(req, res, next) {\n    userService\n        .create(req.body)\n        .then(() => res.json({}))\n        .catch(err => next(err));\n}\n\nfunction getAll(req, res, next) {\n    userService\n        .getAll()\n        .then(users => res.json(users))\n        .catch(err => next(err));\n}\n\nfunction getCurrent(req, res, next) {\n    userService\n        .getById(req.user.sub)\n        .then(user => (user ? res.json(user) : res.sendStatus(404)))\n        .catch(err => next(err));\n}\n\nfunction getById(req, res, next) {\n    userService\n        .getById(req.params.id)\n        .then(user => (user ? res.json(user) : res.sendStatus(404)))\n        .catch(err => next(err));\n}\n\nfunction update(req, res, next) {\n    userService\n        .update(req.params.id, req.body)\n        .then(() => res.json({}))\n        .catch(err => next(err));\n}\n\nfunction _delete(req, res, next) {\n    userService\n        .delete(req.params.id)\n        .then(() => res.json({}))\n        .catch(err => next(err));\n}\n"],"file":"users.controller.js"}