import{useState,useEffect}from"react";var evtTarget;try{evtTarget=new EventTarget();}catch(_unused){evtTarget=document.createElement("phony");}var useStorage=storage=>(key,defaultValue)=>{var raw=storage.getItem(key);var[value,setValue]=useState(raw?JSON.parse(raw):defaultValue);var updater=function updater(updatedValue){var remove=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setValue(updatedValue);storage[remove?"removeItem":"setItem"](key,JSON.stringify(updatedValue));evtTarget.dispatchEvent(new CustomEvent("storage_change",{detail:{key}}));};defaultValue!=null&&!raw&&updater(defaultValue);useEffect(()=>{var listener=(_ref)=>{var{detail}=_ref;if(detail.key===key){var lraw=storage.getItem(key);lraw!==raw&&setValue(JSON.parse(lraw));}};evtTarget.addEventListener("storage_change",listener);return()=>evtTarget.removeEventListener("storage_change",listener);});return[value,updatedValue=>updater(updatedValue),()=>updater(null,true)];};export var useLocalStorage=useStorage(localStorage);export var useSessionStorage=useStorage(sessionStorage);